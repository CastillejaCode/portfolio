---
import Review from '@/features/reviews/components/Review/index.astro';
import ContentLayout from '@/layouts/ContentLayout.astro';
import { getCollection } from 'astro:content';

const title = 'Blog';
const reviews = await getCollection('reviews');

const latestReviews = reviews.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<ContentLayout title={title}>
  <p slot='info'>my thoughts on stuff I've consumed</p>
  {
    latestReviews.map((post) => {
      return <Review url={`/blog/${post.slug}`} data={post.data} />;
    })
  }
</ContentLayout>
